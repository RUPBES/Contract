@using BusinessLayer.Models.PRO
@using DatabaseLayer.Models.PRO
@model List<EstimateDTO>
@{
    ViewData["Title"] = "Чтение данных из локальной сметы";
    int backId = 0;
    if ((int)ViewData["returnContractId"] == 0)
        backId = (int)ViewData["contractId"];
    else backId = (int)ViewData["returnContractId"];
}
<style>
    .demo-section {
        display: flex;
        flex-direction: column;
    }

    .dm-modal {
        background-color: lightsteelblue;
    }

    .close-btn {
        color: red
    }

        .close-btn::after {
            border: 2px solid #F00 !important;
        }

        .close-btn:hover::after {
            border-color: red !important;
            color: red !important;
            -webkit-transform: scale(1);
            -moz-transform: scale(1);
            -ms-transform: scale(1);
            transform: scale(1);
            font-weight: bold;
        }
</style>
@section Table {
    <div class="full-width">
        <a asp-action="AddEstimate" asp-controller="Estimate" asp-route-contractId="@ViewData["contractId"]" asp-route-returnContractId="@ViewData["returnContractId"]" class="k-button btn-success">Добавить смету</a>
        <table class="table table-main table-main-short table-bordered table-hover table-condensed" id="contractTable">
            <thead>
                <tr>
                    <th>
                        Шифр здания, сооружения
                    </th>
                    <th>
                        Наименование здания, сооружения
                    </th>
                    <th>
                        Комплект чертежей
                    </th>
                    <th>
                        Наименование чертежа
                    </th>
                    <th>
                        Дата получения чертежа
                    </th>
                    <th>
                        Дата получения изменения чертежа
                    </th>
                    <th>
                        Номер сметы
                    </th>
                    <th>
                        Дата получения сметы
                    </th>
                    <th>
                        Дата получения изменения сметы
                    </th>
                    <th>
                        Стоимость по договору, руб.
                    </th>
                    <th>
                        Трудозатраты, чел/час
                    </th>
                    <th>
                        Выполнено СМР, руб.
                    </th>
                    <th>
                        Процент выполнения, %
                    </th>
                    <th>
                        Остаток СМР, руб.
                    </th>
                    <th>
                        Подрядчик
                    </th>
                </tr>
            </thead>
            <tbody class="table_tbody">
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @item.BuildingCode
                        </td>
                        <td>
                            @item.BuildingName
                        </td>
                        <td>
                            @item.DrawingsKit
                        </td>
                        <td>
                            @item.DrawingsName
                        </td>
                        <td>
                            @item.DrawingsDate.Value.ToString("dd MMMM yyyy")
                        </td>
                        <td>
                            -
                        </td>
                        <td>
                            @item.Number
                        </td>
                        <td>
                            @item.EstimateDate.Value.ToString("dd MMMM yyyy")
                        </td>
                        <td>
                            -
                        </td>
                        <td>
                            @item.ContractsCost
                        </td>
                        <td>
                            @item.LaborCost
                        </td>
                        <td>
                            @item.DoneSmrCost
                        </td>
                        <td>
                            @item.PercentOfContrPrice
                        </td>
                        <td>
                            @item.RemainsSmrCost
                        </td>
                        <td>
                            @item.SubContractor
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
@section Scripts {
    <script>
    </script>
}